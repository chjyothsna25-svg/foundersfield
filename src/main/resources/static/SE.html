<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Startup Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
</head>
<body class="bg-white text-gray-800 font-sans">

  <!-- Navbar -->
  <header class="flex justify-between items-center px-6 py-4 shadow-md">
    <div class="flex items-center space-x-2">
      <img src="images/myicon.jpg" style="width:70px;" class="img-fluid">
      <h1 class="text-2xl font-bold text-blue-800"> FOUNDER'S FIELD</h1>
    </div>

    <nav id="navbar" class="hidden md:flex gap-6 text-gray-700 items-center">
      <!-- Filled dynamically by JS -->
    </nav>

    <!-- Mobile Menu Button -->
    <button class="md:hidden">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
    </button>
  </header>

  <!-- Hero Section -->
  <section class="px-6 md:px-20 py-10 md:flex items-center justify-between">
    <div class="md:w-1/2 space-y-5">
      <h2 class="text-4xl md:text-5xl font-bold text-blue-800">Build Your Startup</h2>
      <p class="text-gray-700 text-lg">A platform to connect startup idea creators with developers, mentors, and investors.</p>
      <div class="flex gap-4">
        <a href="postidea.html" class="bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800">Post your idea</a>
        <a href="#" id="exploreIdeasBtn" class="border border-blue-700 text-blue-700 px-6 py-2 rounded-lg hover:bg-blue-50">Explore Ideas</a>
      </div>
    </div>
    <div class="mt-10 md:mt-0 md:w-1/2">
      <img src="images/WhatsApp Image 2025-07-30 at 11.02.26 AM.jpeg" alt="Startup team" class="w-full max-w-md mx-auto" />
    </div>
  </section>

  <!-- Cards Section -->
  <section class="px-6 md:px-20 py-16 bg-gray-50">
    <h2 class="text-3xl font-bold text-center text-blue-800 mb-10">How We Help You</h2>
    <div class="grid md:grid-cols-3 gap-8">
      <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition">
        <img src="images/WhatsApp Image 2025-07-30 at 11.59.53 AM (1).jpeg" alt="Connect" class="w-full h-48 object-cover rounded-lg mb-4">
        <h3 class="text-xl font-semibold text-blue-700 mb-2">Connect</h3>
        <p class="text-gray-600">Meet like-minded entrepreneurs, developers, mentors, and investors to grow your network and opportunities.</p>
      </div>
      <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition">
        <img src="images/ChatGPT Image Jul 30, 2025, 11_59_30 AM.png" alt="Collaborate" class="w-full h-48 object-cover rounded-lg mb-4">
        <h3 class="text-xl font-semibold text-blue-700 mb-2">Collaborate</h3>
        <p class="text-gray-600">Work together on innovative ideas, share skills, and build solutions that create real impact.</p>
      </div>
      <div class="bg-white rounded-2xl shadow-lg p-6 hover:shadow-2xl transition">
        <img src="images/WhatsApp Image 2025-07-30 at 11.59.53 AM.jpeg" alt="Create" class="w-full h-48 object-cover rounded-lg mb-4">
        <h3 class="text-xl font-semibold text-blue-700 mb-2">Create</h3>
        <p class="text-gray-600">Turn your vision into reality with the support of our ecosystem, bringing your startup to life.</p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-900 text-white text-center py-4">
    <p>Â© 2025 Startup Platform. All Rights Reserved.</p>
  </footer>

  <!-- Scripts -->
  <script>
  async function checkLogin() {
      try {
          const response = await fetch("/api/auth/me", { credentials: "include" });
          const navbar = document.getElementById("navbar");
          navbar.innerHTML = "";

          if (response.ok) {
              const data = await response.json();

              navbar.innerHTML = `
                  <a href="/" class="hover:text-blue-600 hover:scale-125">Home</a>
                  <a href="ff3.html" class="hover:text-blue-600 hover:scale-125">Explore Ideas</a>
                  <a href="findpeople.html" class="hover:text-blue-600 hover:scale-125">Find People</a>

                  <!-- Messages Icon -->
                  <div class="relative cursor-pointer">
                      <img id="messageIcon" src="images/message-icon.png" class="w-8 h-8 hover:opacity-80" alt="Messages">
                      <span id="messageBadge" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold px-1 rounded-full hidden">0</span>
                  </div>

                  <!-- Profile Dropdown -->
                  <div class="relative ml-4">
                      <img id="profileIcon" src="images/usericon.png" alt="User" class="w-8 h-8 rounded-full cursor-pointer">
                      <div id="profileDropdown" class="absolute right-0 mt-2 w-40 bg-white shadow-md rounded hidden">
                          <p class="px-4 py-2 text-gray-700 border-b" id="userEmail"></p>
                          <a href="#" id="logoutBtn" class="block px-4 py-2 text-red-600 hover:bg-gray-100">Logout</a>
                      </div>
                  </div>
              `;

              // Set email
              document.getElementById("userEmail").innerText = data.email;

              const profileIcon = document.getElementById("profileIcon");
              const profileDropdown = document.getElementById("profileDropdown");

              // Add "View Profile" link dynamically
              const viewProfileBtn = document.createElement("a");
              viewProfileBtn.href = `/profile.html?id=${data.id}`;
              viewProfileBtn.innerText = "View Profile";
              viewProfileBtn.classList.add("block", "px-4", "py-2", "text-gray-700", "hover:bg-gray-100");
              profileDropdown.insertBefore(viewProfileBtn, profileDropdown.firstChild);

              // Toggle dropdown on click
              profileIcon.addEventListener("click", (e) => {
                  e.stopPropagation();
                  profileDropdown.classList.toggle("hidden");
              });

              // Close dropdown if clicked outside
              document.addEventListener("click", () => {
                  profileDropdown.classList.add("hidden");
              });

              // Logout
              document.getElementById("logoutBtn").addEventListener("click", async (e) => {
                  e.preventDefault();
                  await fetch("/logout", { method: "POST", credentials: "include" });
                  window.location.reload();
              });

              // Messages click
              document.getElementById("messageIcon").addEventListener("click", () => {
                  window.location.href = "chat.html";
              });

              // Show badge if unread messages exist
              const unreadRes = await fetch("/api/messages/unread-count", { credentials: "include" });
              if (unreadRes.ok) {
                  const count = await unreadRes.json();
                  const badge = document.getElementById("messageBadge");
                  if (count > 0) {
                      badge.innerText = count;
                      badge.classList.remove("hidden");
                  }
              }

          } else {
              // Not logged in
              navbar.innerHTML = `
                  <a href="/" class="hover:text-blue-600 hover:scale-125">Home</a>
                  <a href="ff3.html" class="hover:text-blue-600 hover:scale-125" id="exploreBtn">Explore Ideas</a>
                  <a href="findpeople.html" class="hover:text-blue-600 hover:scale-125">Find People</a>
                  <a href="signup.html" class="bg-blue-700 text-white px-4 py-1 rounded hover:bg-blue-800 hover:scale-125 hover:shadow-[0_0_10px_black]">Sign up</a>
                  <a href="login.html" class="border border-blue-700 text-blue-700 px-4 py-1 rounded hover:bg-blue-50 hover:scale-125">Login</a>
              `;

              // Redirect explore to login if not logged in
              const exploreBtn = document.getElementById("exploreBtn");
              if(exploreBtn){
                  exploreBtn.addEventListener("click", (e) => {
                      e.preventDefault();
                      window.location.href = "login.html";
                  });
              }

              // Also update main "Explore Ideas" button in hero
              const exploreIdeasBtn = document.getElementById("exploreIdeasBtn");
              if(exploreIdeasBtn){
                  exploreIdeasBtn.addEventListener("click", (e) => {
                      e.preventDefault();
                      window.location.href = "login.html";
                  });
              }
          }
      } catch (err) {
          console.error("Error checking login:", err);
      }
  }

  checkLogin();
  </script>

</body>
</html>

